image: 'rust:latest'

stages:
    - test
    - build
    
variables:
    CARGO_HOME: $CI_PROJECT_DIR/cargo
    APT_CACHE_DIR: $CI_PROJECT_DIR/apt
    
before_script:
    - apt-get update -yq
    #- apt-get install -o dir::cache::archives="$APT_CACHE_DIR" -y {{ FILES }}
    - apt upgrade -y
    
test:
    stage: test
    script:
        - rustc --version
        - cargo --version
        - ping -c 1 -t 100 1.1.1.1
        - ping -c 1 -t 100 google.com
        - ping -c 1 -t 100 127.0.0.1
        - ping -c 1 -t 100 localhost
        - cargo test --verbose